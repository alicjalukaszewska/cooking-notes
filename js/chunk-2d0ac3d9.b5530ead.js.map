{"version":3,"sources":["webpack:///./src/routes/recipe/RecipeForm/RecipeForm.vue","webpack:///./node_modules/primevue/textarea/textarea.esm.js","webpack:///./src/routes/recipe/RecipeForm/RecipeSource/RecipeSource.vue","webpack:///./node_modules/primevue/radiobutton/radiobutton.esm.js","webpack:///./src/routes/recipe/RecipeForm/RecipeSource/RecipeSource.vue?ca34","webpack:///./src/routes/recipe/RecipeForm/RecipeSource/RecipeSource.vue?e2c9","webpack:///./src/routes/recipe/RecipeForm/RecipeIngredients/RecipeIngredients.vue","webpack:///./node_modules/uuid/dist/esm-browser/rng.js","webpack:///./node_modules/uuid/dist/esm-browser/regex.js","webpack:///./node_modules/uuid/dist/esm-browser/validate.js","webpack:///./node_modules/uuid/dist/esm-browser/stringify.js","webpack:///./node_modules/uuid/dist/esm-browser/v4.js","webpack:///./src/routes/recipe/RecipeForm/RecipeIngredients/RecipeIngredients.vue?0373","webpack:///./src/routes/recipe/RecipeForm/RecipeIngredients/RecipeIngredients.vue?19c2","webpack:///./src/routes/recipe/RecipeForm/RecipeIngredients/index.ts","webpack:///./src/routes/recipe/RecipeForm/RecipeForm.vue?dce7","webpack:///./src/routes/recipe/RecipeForm/RecipeForm.vue?db52"],"names":["class","for","title","recipe","$t","content","checkValidation","id","type","form","name","isNameValid","isSourceValid","$event","updateForm","selectedDates","selectionMode","maxDate","maxInputValue","stars","RATING_MAX","rating","cancel","notes","rows","footer","disabled","submitForm","label","$router","go","script","emits","props","modelValue","autoResize","Boolean","this","$el","offsetParent","resize","methods","style","window","getComputedStyle","height","borderTopWidth","borderBottomWidth","scrollHeight","parseFloat","maxHeight","overflowY","overflow","event","$emit","target","value","computed","toString","length","_ctx","_cache","$props","$setup","$data","$options","filled","$attrs","onInput","args","styleInject","css","ref","insertAt","document","head","getElementsByTagName","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","css_248z","render","sourceOptions","source","key","selectedSource","changeSource","validateUrl","recipeUrl","isUrlValid","bookTitle","bookPage","bookAuthors","comment","inheritAttrs","focused","$refs","input","focus","checked","equals","containerClass","onClick","onFocus","onBlur","role","components","RadioButton","InputText","Textarea","Object","required","setup","emit","store","state","activeRecipe","getSource","find","option","initFormValues","assign","sourceInfo","placeholder","ingredient","manageNewIngredient","icon","selectedIngredients","options","ingredients","optionLabel","filter","display","slotProps","confirmDelete","showConfirmDialog","visible","deleteIngredient","text","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","validate","uuid","test","byteToHex","push","substr","stringify","arr","offset","arguments","undefined","toLowerCase","TypeError","v4","buf","rnds","random","i","Button","MultiSelect","ConfirmDialog","user","ingredientsList","ingredientToDelete","chosenIngredients","savedIngredient","newIngredient","dispatch","selectedIngredient","Rating","Calendar","RecipeSource","RecipeIngredients","Card","route","router","recipeId","params","Date","allIngredients","values","dates","selectedDatesAsTimestamps","map","date","getTime","lastUsed","creationDate","getRecipeDataById"],"mappings":"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","file":"js/chunk-2d0ac3d9.b5530ead.js","sourcesContent":["<template>\r\n  <Card>\r\n    <template #title>\r\n      {{ recipe ? $t(\"recipe.edit\") : $t(\"recipe.add\") }}\r\n    </template>\r\n    <template #content>\r\n      <form>\r\n        <div class=\"p-fluid p-formgrid p-grid\">\r\n          <div class=\"p-field p-col-12\">\r\n            <label for=\"name\">{{ $t(\"recipe.name\") }} *</label>\r\n            <InputText\r\n              @keyup=\"checkValidation\"\r\n              id=\"name\"\r\n              type=\"text\"\r\n              v-model=\"form.name\"\r\n            />\r\n            <div class=\"validation-error p-mt-2\" v-if=\"!isNameValid\">\r\n              {{ $t(\"validation.required\") }}\r\n            </div>\r\n          </div>\r\n          <div class=\"p-field p-col-12 p-md-6\">\r\n            <label for=\"source\">{{ $t(\"recipe.sourceLabel\") }}</label>\r\n            <RecipeSource\r\n              @is-valid=\"isSourceValid = $event\"\r\n              @update-source=\"updateForm\"\r\n            />\r\n          </div>\r\n          <div class=\"p-field p-col-12 p-md-6\">\r\n            <label for=\"url\">{{ $t(\"recipe.dates\") }}</label>\r\n            <Calendar\r\n              v-model=\"selectedDates\"\r\n              selectionMode=\"multiple\"\r\n              :maxDate=\"maxInputValue\"\r\n            />\r\n          </div>\r\n          <div class=\"p-field p-col-12 p-md-6\">\r\n            <label for=\"ingredients\">{{ $t(\"recipe.ingredients\") }}</label>\r\n            <RecipeIngredients\r\n              @update-ingredients=\"updateForm\"\r\n              :recipe=\"recipe\"\r\n            />\r\n          </div>\r\n          <div class=\"p-field p-col-12\">\r\n            <label for=\"rating\">{{ $t(\"recipe.rating\") }}</label>\r\n            <Rating :stars=\"RATING_MAX\" v-model=\"form.rating\" :cancel=\"false\" />\r\n          </div>\r\n          <div class=\"p-field p-col-12\">\r\n            <label for=\"notes\">{{ $t(\"recipe.notes\") }}</label>\r\n            <Textarea id=\"notes\" v-model=\"form.notes\" rows=\"6\" />\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </template>\r\n    <template #footer>\r\n      <Button\r\n        class=\"p-mr-3\"\r\n        type=\"button\"\r\n        :disabled=\"!isSourceValid || !isNameValid\"\r\n        @click=\"submitForm\"\r\n        :label=\"$t('common.submit')\"\r\n      />\r\n      <Button\r\n        type=\"button\"\r\n        class=\"p-button-outlined p-button-secondary\"\r\n        :label=\"$t('common.back')\"\r\n        @click=\"$router.go(-1)\"\r\n      />\r\n    </template>\r\n  </Card>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  defineComponent,\r\n  reactive,\r\n  ref,\r\n  computed,\r\n  onMounted,\r\n  watch,\r\n  onUnmounted,\r\n  watchEffect,\r\n} from \"vue\";\r\nimport InputText from \"primevue/inputtext\";\r\nimport Textarea from \"primevue/textarea\";\r\nimport Rating from \"primevue/rating\";\r\nimport Calendar from \"primevue/calendar\";\r\nimport Button from \"primevue/button\";\r\nimport Card from \"primevue/card\";\r\nimport RecipeSource from \"../RecipeForm/RecipeSource\";\r\nimport RecipeIngredients from \"./RecipeIngredients\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { Recipe, AppState } from \"@/store/types\";\r\nimport { RATING_MAX } from \"@/static/data.config\";\r\nimport {\r\n  timestampsToDates,\r\n  getTheLargestNumber,\r\n} from \"@/services/utils.service\";\r\nexport default defineComponent({\r\n  components: {\r\n    InputText,\r\n    Textarea,\r\n    Rating,\r\n    Calendar,\r\n    Button,\r\n    RecipeSource,\r\n    RecipeIngredients,\r\n    Card,\r\n  },\r\n  setup() {\r\n    const store = useStore<AppState>();\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const recipeId = route.params.id;\r\n    const selectedDates = ref<Date[]>([]);\r\n    const maxInputValue = ref<Date>(new Date());\r\n    const recipe = computed(() => store.state.activeRecipe);\r\n    const user = computed(() => store.state.user);\r\n    const form: Partial<Recipe> = reactive({\r\n      name: \"\",\r\n      notes: \"\",\r\n      rating: 1,\r\n      source: \"link\",\r\n      ingredients: [],\r\n    });\r\n    const allIngredients = ref([]);\r\n    const isSourceValid = ref(true);\r\n    const isNameValid = ref(true);\r\n\r\n    const updateForm = (values: Partial<Recipe>) => {\r\n      Object.assign(form, values);\r\n      if (values.dates?.length)\r\n        selectedDates.value = timestampsToDates(values.dates);\r\n    };\r\n\r\n    watchEffect(() => {\r\n      if (!recipe.value) return;\r\n\r\n      updateForm(recipe.value);\r\n    });\r\n\r\n    const selectedDatesAsTimestamps = () => {\r\n      return selectedDates.value?.map((date) => new Date(date).getTime());\r\n    };\r\n\r\n    const submitForm = () => {\r\n      if (!isSourceValid.value) return;\r\n      if (selectedDates.value.length) {\r\n        form.dates = selectedDatesAsTimestamps();\r\n        form.lastUsed = getTheLargestNumber(form.dates);\r\n      }\r\n      if (recipeId) {\r\n        store.dispatch(\"updateRecipe\", { id: recipeId, ...form });\r\n        router.push({ name: \"recipe\", params: { id: recipeId } });\r\n      } else {\r\n        const creationDate = new Date().getTime();\r\n        store.dispatch(\"createRecipe\", { creationDate, ...form });\r\n        router.push({ name: \"list\" });\r\n      }\r\n    };\r\n\r\n    const getRecipeDataById = () => {\r\n      if (recipeId) {\r\n        store.dispatch(\"fetchRecipeById\", recipeId);\r\n      }\r\n    };\r\n\r\n    const checkValidation = () => {\r\n      isNameValid.value = !!form.name;\r\n    };\r\n\r\n    onMounted(() => {\r\n      getRecipeDataById();\r\n    });\r\n\r\n    watch(user, () => {\r\n      if (user.value) getRecipeDataById();\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      store.dispatch(\"resetActiveRecipe\");\r\n    });\r\n\r\n    return {\r\n      form,\r\n      allIngredients,\r\n      selectedDates,\r\n      isNameValid,\r\n      isSourceValid,\r\n      recipe,\r\n      RATING_MAX,\r\n      maxInputValue,\r\n      submitForm,\r\n      updateForm,\r\n      checkValidation,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped></style>\r\n","import { openBlock, createBlock, mergeProps } from 'vue';\n\nvar script = {\n    name: 'Textarea',\n    emits: ['update:modelValue'],\n    props: {\n        modelValue: null,\n        autoResize: Boolean\n    },\n    mounted() {\n        if (this.$el.offsetParent && this.autoResize) {\n            this.resize();\n        }\n    },\n    updated() {\n        if (this.$el.offsetParent && this.autoResize) {\n            this.resize();\n        }\n    },\n    methods: {\n        resize() {\n            const style = window.getComputedStyle(this.$el);\n            this.$el.style.height = 'auto';\n            this.$el.style.height = `calc(${style.borderTopWidth} + ${style.borderBottomWidth} + ${this.$el.scrollHeight}px)`;\n\n            if (parseFloat(this.$el.style.height) >= parseFloat(this.$el.style.maxHeight)) {\n                this.$el.style.overflowY = \"scroll\";\n                this.$el.style.height = this.$el.style.maxHeight;\n            }\n            else {\n                this.$el.style.overflow = \"hidden\";\n            }\n        },\n        onInput(event) {\n             if (this.autoResize) {\n                this.resize();\n            }\n\n            this.$emit('update:modelValue', event.target.value);\n        }\n    },\n    computed: {\n        filled() {\n            return (this.modelValue != null && this.modelValue.toString().length > 0)\n        }\n    }\n};\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return (openBlock(), createBlock(\"textarea\", mergeProps({\n    class: ['p-inputtextarea p-inputtext p-component', {'p-filled': $options.filled, 'p-inputtextarea-resizable ': $props.autoResize}]\n  }, _ctx.$attrs, {\n    value: $props.modelValue,\n    onInput: _cache[1] || (_cache[1] = (...args) => ($options.onInput && $options.onInput(...args)))\n  }), null, 16, [\"value\"]))\n}\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \"\\n.p-inputtextarea-resizable {\\n    overflow: hidden;\\n    resize: none;\\n}\\n.p-fluid .p-inputtextarea {\\n    width: 100%;\\n}\\n\";\nstyleInject(css_248z);\n\nscript.render = render;\n\nexport default script;\n","<template>\r\n  <div>\r\n    <div class=\"p-d-flex\">\r\n      <div\r\n        v-for=\"source of sourceOptions\"\r\n        :key=\"source.key\"\r\n        class=\"p-field-radiobutton p-mr-4\"\r\n      >\r\n        <RadioButton\r\n          :id=\"source.key\"\r\n          name=\"source\"\r\n          :value=\"source\"\r\n          v-model=\"selectedSource\"\r\n          @change=\"changeSource\"\r\n        />\r\n        <label :for=\"source.key\">{{ source.name }}</label>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"selectedSource.key === 'link'\">\r\n      <div class=\"p-field\">\r\n        <label for=\"url\">{{ $t(\"recipe.url\") }}</label>\r\n        <InputText\r\n          @input=\"validateUrl\"\r\n          id=\"url\"\r\n          type=\"url\"\r\n          v-model=\"form.recipeUrl\"\r\n        />\r\n        <div\r\n          class=\"validation-error p-mt-2\"\r\n          v-if=\"form.recipeUrl && !isUrlValid\"\r\n        >\r\n          {{ $t(\"validation.invalidUrl\") }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"selectedSource.key === 'book'\">\r\n      <div class=\"p-field\">\r\n        <label for=\"title\">{{ $t(\"recipe.book.title\") }}</label>\r\n        <InputText id=\"title\" type=\"text\" v-model=\"form.bookTitle\" />\r\n      </div>\r\n      <div class=\"p-field\">\r\n        <label for=\"page\">{{ $t(\"recipe.book.page\") }}</label>\r\n        <InputText id=\"page\" type=\"text\" v-model=\"form.bookPage\" />\r\n      </div>\r\n      <div class=\"p-field\">\r\n        <label for=\"authors\">{{ $t(\"recipe.book.authors\") }}</label>\r\n        <InputText id=\"authors\" type=\"text\" v-model=\"form.bookAuthors\" />\r\n      </div>\r\n    </div>\r\n    <div v-if=\"selectedSource.key === 'other'\">\r\n      <div class=\"p-field\">\r\n        <label for=\"comment\">{{ $t(\"recipe.comment\") }}</label>\r\n        <Textarea id=\"comment\" type=\"text\" v-model=\"form.comment\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  defineComponent,\r\n  reactive,\r\n  Ref,\r\n  ref,\r\n  watch,\r\n  PropType,\r\n  computed,\r\n} from \"vue\";\r\nimport RadioButton from \"primevue/radiobutton\";\r\nimport InputText from \"primevue/inputtext\";\r\nimport Textarea from \"primevue/textarea\";\r\nimport { SourceOption, Recipe, AppState } from \"@/store/types\";\r\nimport { useStore } from \"vuex\";\r\nimport { isValidHttpUrl } from \"@/services/utils.service\";\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    RadioButton,\r\n    InputText,\r\n    Textarea,\r\n  },\r\n  props: {\r\n    recipe: {\r\n      type: Object as PropType<Recipe>,\r\n      required: false,\r\n    },\r\n  },\r\n  emits: [\"update-source\", \"is-valid\"],\r\n  setup(props, { emit }) {\r\n    const store = useStore<AppState>();\r\n    const isUrlValid = ref(true);\r\n    const sourceOptions: Ref<SourceOption[]> = ref([\r\n      {\r\n        name: \"Link\",\r\n        key: \"link\" as const,\r\n      },\r\n      {\r\n        name: \"Book\",\r\n        key: \"book\" as const,\r\n      },\r\n      {\r\n        name: \"Other\",\r\n        key: \"other\" as const,\r\n      },\r\n    ]);\r\n\r\n    const recipe = computed(() => store.state.activeRecipe);\r\n\r\n    const getSource = () => {\r\n      return (\r\n        sourceOptions.value.find(\r\n          (option) => option.key === recipe?.value?.source\r\n        ) || sourceOptions.value[0]\r\n      );\r\n    };\r\n\r\n    const initFormValues = {\r\n      source: \"link\",\r\n      recipeUrl: \"\",\r\n      bookTitle: \"\",\r\n      bookPage: \"\",\r\n      bookAuthors: \"\",\r\n      comment: \"\",\r\n    };\r\n\r\n    const selectedSource = ref(getSource());\r\n    //split object to create a new one and prevent from overriding initFormValues\r\n    const form = reactive({ ...initFormValues, ...recipe.value });\r\n\r\n    watch(recipe, () => {\r\n      Object.assign(form, { ...recipe.value });\r\n      selectedSource.value = getSource();\r\n    });\r\n\r\n    const validateUrl = () => {\r\n      if (selectedSource.value.key !== \"link\") {\r\n        emit(\"is-valid\", true);\r\n      } else {\r\n        isUrlValid.value = isValidHttpUrl(form.recipeUrl);\r\n        emit(\"is-valid\", isUrlValid.value);\r\n      }\r\n    };\r\n\r\n    const changeSource = () => {\r\n      validateUrl();\r\n      const source = {\r\n        source: selectedSource.value.key,\r\n      };\r\n      emit(\"update-source\", source);\r\n    };\r\n\r\n    watch(form, () => {\r\n      const sourceInfo = {\r\n        source: form.source,\r\n        recipeUrl: form.recipeUrl,\r\n        bookTitle: form.bookTitle,\r\n        bookPage: form.bookPage,\r\n        bookAuthors: form.bookAuthors,\r\n        comment: form.comment,\r\n      };\r\n      emit(\"update-source\", sourceInfo);\r\n    });\r\n\r\n    return {\r\n      form,\r\n      sourceOptions,\r\n      selectedSource,\r\n      isUrlValid,\r\n      changeSource,\r\n      validateUrl,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped></style>\r\n","import { ObjectUtils } from 'primevue/utils';\nimport { openBlock, createBlock, createVNode, mergeProps } from 'vue';\n\nvar script = {\n    name: 'RadioButton',\n    inheritAttrs: false,\n    emits: ['click', 'update:modelValue', 'change'],\n    props: {\n\t\tvalue: null,\n        modelValue: null,\n        class: null,\n        style: null\n    },\n    data() {\n        return {\n            focused: false\n        };\n    },\n    methods: {\n        onClick(event) {\n            if (!this.$attrs.disabled) {\n                this.$emit('click', event);\n                this.$emit('update:modelValue', this.value);\n                this.$refs.input.focus();\n\n                if (!this.checked) {\n                    this.$emit('change', event);\n                }\n            }\n        },\n        onFocus() {\n            this.focused = true;\n        },\n        onBlur() {\n            this.focused = false;\n        }\n    },\n    computed: {\n        checked() {\n            return this.modelValue != null && ObjectUtils.equals(this.modelValue, this.value);\n        },\n        containerClass() {\n            return ['p-radiobutton p-component', this.class, {'p-radiobutton-checked': this.checked, 'p-radiobutton-disabled': this.$attrs.disabled, 'p-radiobutton-focused': this.focused}];\n        }\n    }\n};\n\nconst _hoisted_1 = { class: \"p-hidden-accessible\" };\nconst _hoisted_2 = /*#__PURE__*/createVNode(\"div\", { class: \"p-radiobutton-icon\" }, null, -1);\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return (openBlock(), createBlock(\"div\", {\n    class: $options.containerClass,\n    onClick: _cache[3] || (_cache[3] = $event => ($options.onClick($event))),\n    style: $props.style\n  }, [\n    createVNode(\"div\", _hoisted_1, [\n      createVNode(\"input\", mergeProps({\n        ref: \"input\",\n        type: \"radio\",\n        checked: $options.checked,\n        value: $props.value\n      }, _ctx.$attrs, {\n        onFocus: _cache[1] || (_cache[1] = (...args) => ($options.onFocus && $options.onFocus(...args))),\n        onBlur: _cache[2] || (_cache[2] = (...args) => ($options.onBlur && $options.onBlur(...args)))\n      }), null, 16, [\"checked\", \"value\"])\n    ]),\n    createVNode(\"div\", {\n      ref: \"box\",\n      class: ['p-radiobutton-box', {'p-highlight': $options.checked, 'p-disabled': _ctx.$attrs.disabled, 'p-focus': $data.focused}],\n      role: \"radio\",\n      \"aria-checked\": $options.checked\n    }, [\n      _hoisted_2\n    ], 10, [\"aria-checked\"])\n  ], 6))\n}\n\nscript.render = render;\n\nexport default script;\n","\r\nimport {\r\n  defineComponent,\r\n  reactive,\r\n  Ref,\r\n  ref,\r\n  watch,\r\n  PropType,\r\n  computed,\r\n} from \"vue\";\r\nimport RadioButton from \"primevue/radiobutton\";\r\nimport InputText from \"primevue/inputtext\";\r\nimport Textarea from \"primevue/textarea\";\r\nimport { SourceOption, Recipe, AppState } from \"@/store/types\";\r\nimport { useStore } from \"vuex\";\r\nimport { isValidHttpUrl } from \"@/services/utils.service\";\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    RadioButton,\r\n    InputText,\r\n    Textarea,\r\n  },\r\n  props: {\r\n    recipe: {\r\n      type: Object as PropType<Recipe>,\r\n      required: false,\r\n    },\r\n  },\r\n  emits: [\"update-source\", \"is-valid\"],\r\n  setup(props, { emit }) {\r\n    const store = useStore<AppState>();\r\n    const isUrlValid = ref(true);\r\n    const sourceOptions: Ref<SourceOption[]> = ref([\r\n      {\r\n        name: \"Link\",\r\n        key: \"link\" as const,\r\n      },\r\n      {\r\n        name: \"Book\",\r\n        key: \"book\" as const,\r\n      },\r\n      {\r\n        name: \"Other\",\r\n        key: \"other\" as const,\r\n      },\r\n    ]);\r\n\r\n    const recipe = computed(() => store.state.activeRecipe);\r\n\r\n    const getSource = () => {\r\n      return (\r\n        sourceOptions.value.find(\r\n          (option) => option.key === recipe?.value?.source\r\n        ) || sourceOptions.value[0]\r\n      );\r\n    };\r\n\r\n    const initFormValues = {\r\n      source: \"link\",\r\n      recipeUrl: \"\",\r\n      bookTitle: \"\",\r\n      bookPage: \"\",\r\n      bookAuthors: \"\",\r\n      comment: \"\",\r\n    };\r\n\r\n    const selectedSource = ref(getSource());\r\n    //split object to create a new one and prevent from overriding initFormValues\r\n    const form = reactive({ ...initFormValues, ...recipe.value });\r\n\r\n    watch(recipe, () => {\r\n      Object.assign(form, { ...recipe.value });\r\n      selectedSource.value = getSource();\r\n    });\r\n\r\n    const validateUrl = () => {\r\n      if (selectedSource.value.key !== \"link\") {\r\n        emit(\"is-valid\", true);\r\n      } else {\r\n        isUrlValid.value = isValidHttpUrl(form.recipeUrl);\r\n        emit(\"is-valid\", isUrlValid.value);\r\n      }\r\n    };\r\n\r\n    const changeSource = () => {\r\n      validateUrl();\r\n      const source = {\r\n        source: selectedSource.value.key,\r\n      };\r\n      emit(\"update-source\", source);\r\n    };\r\n\r\n    watch(form, () => {\r\n      const sourceInfo = {\r\n        source: form.source,\r\n        recipeUrl: form.recipeUrl,\r\n        bookTitle: form.bookTitle,\r\n        bookPage: form.bookPage,\r\n        bookAuthors: form.bookAuthors,\r\n        comment: form.comment,\r\n      };\r\n      emit(\"update-source\", sourceInfo);\r\n    });\r\n\r\n    return {\r\n      form,\r\n      sourceOptions,\r\n      selectedSource,\r\n      isUrlValid,\r\n      changeSource,\r\n      validateUrl,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./RecipeSource.vue?vue&type=template&id=2905dcc0\"\nimport script from \"./RecipeSource.vue?vue&type=script&lang=ts\"\nexport * from \"./RecipeSource.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n  <div>\r\n    <div class=\"p-inputgroup p-mb-2\">\r\n      <InputText\r\n        :placeholder=\"$t('ingredients.add')\"\r\n        v-model.trim=\"ingredient\"\r\n      />\r\n      <Button\r\n        @click=\"manageNewIngredient\"\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        class=\"p-button-primary\"\r\n      />\r\n    </div>\r\n    <MultiSelect\r\n      v-model=\"selectedIngredients\"\r\n      :options=\"ingredients\"\r\n      optionLabel=\"name\"\r\n      :placeholder=\"$t('ingredients.select')\"\r\n      :filter=\"true\"\r\n      @change=\"updateForm\"\r\n      display=\"chip\"\r\n    >\r\n      <template #option=\"slotProps\">\r\n        <div class=\"ingredient-option\">\r\n          <div>{{ slotProps.option.name }}</div>\r\n          <Button\r\n            @click.stop=\"confirmDelete(slotProps.option)\"\r\n            type=\"button\"\r\n            :title=\"$t('ingredients.delete')\"\r\n            icon=\"pi pi-times\"\r\n            class=\"p-button-rounded p-button-danger p-button-text\"\r\n          />\r\n        </div>\r\n      </template>\r\n    </MultiSelect>\r\n\r\n    <ConfirmDialog\r\n      v-if=\"showConfirmDialog\"\r\n      v-model:visible=\"showConfirmDialog\"\r\n      @close=\"\r\n        showConfirmDialog = false;\r\n        ingredientToDelete = undefined;\r\n      \"\r\n      @confirm=\"deleteIngredient\"\r\n      :text=\"$t('ingredients.deleteIngredientText')\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  defineComponent,\r\n  ref,\r\n  watch,\r\n  PropType,\r\n  onMounted,\r\n  computed,\r\n} from \"vue\";\r\nimport MultiSelect from \"primevue/multiselect\";\r\nimport InputText from \"primevue/inputtext\";\r\nimport Button from \"primevue/button\";\r\nimport { Recipe, AppState, NameId } from \"@/store/types\";\r\nimport { useStore } from \"vuex\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { ConfirmDialog } from \"@/components\";\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    InputText,\r\n    Button,\r\n    MultiSelect,\r\n    ConfirmDialog,\r\n  },\r\n  props: {\r\n    recipe: {\r\n      type: Object as PropType<Recipe>,\r\n      required: false,\r\n    },\r\n  },\r\n  emits: [\"update-ingredients\"],\r\n  setup(props, { emit }) {\r\n    const store = useStore<AppState>();\r\n    const user = computed(() => store.state.user);\r\n    const ingredient = ref<string>(\"\");\r\n    const ingredients = computed(() => store.state.ingredientsList || []);\r\n    const selectedIngredients = ref(props.recipe?.ingredients || []);\r\n    const showConfirmDialog = ref(false);\r\n    const ingredientToDelete = ref<NameId>();\r\n\r\n    watch(\r\n      () => props.recipe,\r\n      () => {\r\n        if (!props.recipe || !props.recipe.ingredients) return;\r\n        selectedIngredients.value = props.recipe.ingredients;\r\n      }\r\n    );\r\n\r\n    const updateForm = () => {\r\n      const chosenIngredients = {\r\n        ingredients: selectedIngredients.value,\r\n      };\r\n      emit(\"update-ingredients\", chosenIngredients);\r\n    };\r\n\r\n    const manageNewIngredient = () => {\r\n      //prevent from adding empty ingredient\r\n      if (!ingredient.value?.length) return;\r\n\r\n      const savedIngredient = ingredients.value.find(\r\n        (savedIngredient) =>\r\n          savedIngredient.name.toLowerCase() === ingredient.value.toLowerCase()\r\n      );\r\n      if (savedIngredient) {\r\n        selectedIngredients.value.push(savedIngredient);\r\n        ingredient.value = \"\";\r\n        updateForm();\r\n      } else {\r\n        const newIngredient = {\r\n          id: uuidv4(),\r\n          name: ingredient.value,\r\n        };\r\n        store.dispatch(\"createIngredient\", newIngredient);\r\n        manageNewIngredient();\r\n      }\r\n    };\r\n\r\n    const confirmDelete = (ingredient: NameId) => {\r\n      showConfirmDialog.value = true;\r\n      ingredientToDelete.value = ingredient;\r\n    };\r\n\r\n    const deleteIngredient = () => {\r\n      selectedIngredients.value = selectedIngredients.value.filter(\r\n        (selectedIngredient) =>\r\n          selectedIngredient.id !== ingredientToDelete.value?.id\r\n      );\r\n      store.dispatch(\"removeIngredient\", ingredientToDelete.value?.id);\r\n      if (props.recipe) {\r\n        store.dispatch(\"updateRecipe\", {\r\n          id: props.recipe.id,\r\n          ingredients: ingredients.value.filter(\r\n            (savedIngredient) =>\r\n              savedIngredient.id !== ingredientToDelete.value?.id\r\n          ),\r\n        });\r\n      }\r\n      showConfirmDialog.value = false;\r\n      ingredientToDelete.value = undefined;\r\n    };\r\n\r\n    onMounted(() => {\r\n      store.dispatch(\"fetchIngredients\");\r\n    });\r\n\r\n    watch(user, () => {\r\n      store.dispatch(\"fetchIngredients\");\r\n    });\r\n\r\n    return {\r\n      manageNewIngredient,\r\n      updateForm,\r\n      ingredient,\r\n      ingredients,\r\n      selectedIngredients,\r\n      confirmDelete,\r\n      deleteIngredient,\r\n      showConfirmDialog,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\"></style>\r\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","\r\nimport {\r\n  defineComponent,\r\n  ref,\r\n  watch,\r\n  PropType,\r\n  onMounted,\r\n  computed,\r\n} from \"vue\";\r\nimport MultiSelect from \"primevue/multiselect\";\r\nimport InputText from \"primevue/inputtext\";\r\nimport Button from \"primevue/button\";\r\nimport { Recipe, AppState, NameId } from \"@/store/types\";\r\nimport { useStore } from \"vuex\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { ConfirmDialog } from \"@/components\";\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    InputText,\r\n    Button,\r\n    MultiSelect,\r\n    ConfirmDialog,\r\n  },\r\n  props: {\r\n    recipe: {\r\n      type: Object as PropType<Recipe>,\r\n      required: false,\r\n    },\r\n  },\r\n  emits: [\"update-ingredients\"],\r\n  setup(props, { emit }) {\r\n    const store = useStore<AppState>();\r\n    const user = computed(() => store.state.user);\r\n    const ingredient = ref<string>(\"\");\r\n    const ingredients = computed(() => store.state.ingredientsList || []);\r\n    const selectedIngredients = ref(props.recipe?.ingredients || []);\r\n    const showConfirmDialog = ref(false);\r\n    const ingredientToDelete = ref<NameId>();\r\n\r\n    watch(\r\n      () => props.recipe,\r\n      () => {\r\n        if (!props.recipe || !props.recipe.ingredients) return;\r\n        selectedIngredients.value = props.recipe.ingredients;\r\n      }\r\n    );\r\n\r\n    const updateForm = () => {\r\n      const chosenIngredients = {\r\n        ingredients: selectedIngredients.value,\r\n      };\r\n      emit(\"update-ingredients\", chosenIngredients);\r\n    };\r\n\r\n    const manageNewIngredient = () => {\r\n      //prevent from adding empty ingredient\r\n      if (!ingredient.value?.length) return;\r\n\r\n      const savedIngredient = ingredients.value.find(\r\n        (savedIngredient) =>\r\n          savedIngredient.name.toLowerCase() === ingredient.value.toLowerCase()\r\n      );\r\n      if (savedIngredient) {\r\n        selectedIngredients.value.push(savedIngredient);\r\n        ingredient.value = \"\";\r\n        updateForm();\r\n      } else {\r\n        const newIngredient = {\r\n          id: uuidv4(),\r\n          name: ingredient.value,\r\n        };\r\n        store.dispatch(\"createIngredient\", newIngredient);\r\n        manageNewIngredient();\r\n      }\r\n    };\r\n\r\n    const confirmDelete = (ingredient: NameId) => {\r\n      showConfirmDialog.value = true;\r\n      ingredientToDelete.value = ingredient;\r\n    };\r\n\r\n    const deleteIngredient = () => {\r\n      selectedIngredients.value = selectedIngredients.value.filter(\r\n        (selectedIngredient) =>\r\n          selectedIngredient.id !== ingredientToDelete.value?.id\r\n      );\r\n      store.dispatch(\"removeIngredient\", ingredientToDelete.value?.id);\r\n      if (props.recipe) {\r\n        store.dispatch(\"updateRecipe\", {\r\n          id: props.recipe.id,\r\n          ingredients: ingredients.value.filter(\r\n            (savedIngredient) =>\r\n              savedIngredient.id !== ingredientToDelete.value?.id\r\n          ),\r\n        });\r\n      }\r\n      showConfirmDialog.value = false;\r\n      ingredientToDelete.value = undefined;\r\n    };\r\n\r\n    onMounted(() => {\r\n      store.dispatch(\"fetchIngredients\");\r\n    });\r\n\r\n    watch(user, () => {\r\n      store.dispatch(\"fetchIngredients\");\r\n    });\r\n\r\n    return {\r\n      manageNewIngredient,\r\n      updateForm,\r\n      ingredient,\r\n      ingredients,\r\n      selectedIngredients,\r\n      confirmDelete,\r\n      deleteIngredient,\r\n      showConfirmDialog,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./RecipeIngredients.vue?vue&type=template&id=5f287c2a\"\nimport script from \"./RecipeIngredients.vue?vue&type=script&lang=ts\"\nexport * from \"./RecipeIngredients.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import RecipeIngredients from \"./RecipeIngredients.vue\";\r\n\r\nexport default RecipeIngredients;\r\n","\r\nimport {\r\n  defineComponent,\r\n  reactive,\r\n  ref,\r\n  computed,\r\n  onMounted,\r\n  watch,\r\n  onUnmounted,\r\n  watchEffect,\r\n} from \"vue\";\r\nimport InputText from \"primevue/inputtext\";\r\nimport Textarea from \"primevue/textarea\";\r\nimport Rating from \"primevue/rating\";\r\nimport Calendar from \"primevue/calendar\";\r\nimport Button from \"primevue/button\";\r\nimport Card from \"primevue/card\";\r\nimport RecipeSource from \"../RecipeForm/RecipeSource\";\r\nimport RecipeIngredients from \"./RecipeIngredients\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { Recipe, AppState } from \"@/store/types\";\r\nimport { RATING_MAX } from \"@/static/data.config\";\r\nimport {\r\n  timestampsToDates,\r\n  getTheLargestNumber,\r\n} from \"@/services/utils.service\";\r\nexport default defineComponent({\r\n  components: {\r\n    InputText,\r\n    Textarea,\r\n    Rating,\r\n    Calendar,\r\n    Button,\r\n    RecipeSource,\r\n    RecipeIngredients,\r\n    Card,\r\n  },\r\n  setup() {\r\n    const store = useStore<AppState>();\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const recipeId = route.params.id;\r\n    const selectedDates = ref<Date[]>([]);\r\n    const maxInputValue = ref<Date>(new Date());\r\n    const recipe = computed(() => store.state.activeRecipe);\r\n    const user = computed(() => store.state.user);\r\n    const form: Partial<Recipe> = reactive({\r\n      name: \"\",\r\n      notes: \"\",\r\n      rating: 1,\r\n      source: \"link\",\r\n      ingredients: [],\r\n    });\r\n    const allIngredients = ref([]);\r\n    const isSourceValid = ref(true);\r\n    const isNameValid = ref(true);\r\n\r\n    const updateForm = (values: Partial<Recipe>) => {\r\n      Object.assign(form, values);\r\n      if (values.dates?.length)\r\n        selectedDates.value = timestampsToDates(values.dates);\r\n    };\r\n\r\n    watchEffect(() => {\r\n      if (!recipe.value) return;\r\n\r\n      updateForm(recipe.value);\r\n    });\r\n\r\n    const selectedDatesAsTimestamps = () => {\r\n      return selectedDates.value?.map((date) => new Date(date).getTime());\r\n    };\r\n\r\n    const submitForm = () => {\r\n      if (!isSourceValid.value) return;\r\n      if (selectedDates.value.length) {\r\n        form.dates = selectedDatesAsTimestamps();\r\n        form.lastUsed = getTheLargestNumber(form.dates);\r\n      }\r\n      if (recipeId) {\r\n        store.dispatch(\"updateRecipe\", { id: recipeId, ...form });\r\n        router.push({ name: \"recipe\", params: { id: recipeId } });\r\n      } else {\r\n        const creationDate = new Date().getTime();\r\n        store.dispatch(\"createRecipe\", { creationDate, ...form });\r\n        router.push({ name: \"list\" });\r\n      }\r\n    };\r\n\r\n    const getRecipeDataById = () => {\r\n      if (recipeId) {\r\n        store.dispatch(\"fetchRecipeById\", recipeId);\r\n      }\r\n    };\r\n\r\n    const checkValidation = () => {\r\n      isNameValid.value = !!form.name;\r\n    };\r\n\r\n    onMounted(() => {\r\n      getRecipeDataById();\r\n    });\r\n\r\n    watch(user, () => {\r\n      if (user.value) getRecipeDataById();\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      store.dispatch(\"resetActiveRecipe\");\r\n    });\r\n\r\n    return {\r\n      form,\r\n      allIngredients,\r\n      selectedDates,\r\n      isNameValid,\r\n      isSourceValid,\r\n      recipe,\r\n      RATING_MAX,\r\n      maxInputValue,\r\n      submitForm,\r\n      updateForm,\r\n      checkValidation,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./RecipeForm.vue?vue&type=template&id=371b8910\"\nimport script from \"./RecipeForm.vue?vue&type=script&lang=ts\"\nexport * from \"./RecipeForm.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}